{% extends 'base.html' %}
{% load static %}
{% load currency_filters %}
{% block title %}Cart - ShopX{% endblock %}
{% block content %}
<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10">
  <h1 class="text-3xl font-bold mb-6 text-gray-900">Your Cart</h1>

  {% if items %}
  <div class="bg-white rounded-lg shadow divide-y">
    {% for item in items %}
    <div class="flex items-center justify-between p-4">
      <div class="flex items-center gap-4">
        <img class="w-20 h-20 object-cover rounded-md"
             src="{% if item.product.image %}{{ item.product.image.url }}{% else %}{% static 'placeholder.png' %}{% endif %}"
             alt="{{ item.product.name }}">
        <div>
          <p class="font-semibold text-gray-900">{{ item.product.name }}</p>
          <div class="flex items-center gap-2 mt-1">
            <a href="{% url 'products:decrease_from_cart' item.product.slug %}?next={{ request.path }}" class="px-2 py-1 bg-gray-200 rounded">-</a>
            <span class="text-sm text-gray-700">{{ item.quantity }}</span>
            <a href="{% url 'products:add_to_cart' item.product.slug %}?next={{ request.path }}" class="px-2 py-1 bg-gray-200 rounded">+</a>
          </div>
        </div>
      </div>
      <div class="flex items-center gap-4">
        <p class="font-semibold text-gray-900">{{ item.line_total|floatformat:2|currency }}</p>
        <a href="{% url 'products:remove_from_cart' item.product.slug %}" class="text-red-600 hover:underline">Remove</a>
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="mt-6 flex justify-end items-center gap-6">
    <p class="text-xl font-semibold text-gray-900">
      Total: <span>{{ total|floatformat:2|currency }}</span>
    </p>
    <a href="{% url 'orders:checkout_start' %}" class="bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white px-6 py-2 rounded-md font-semibold shadow transition-colors duration-200">Checkout</a>
  </div>

  {% else %}
    <p class="text-gray-500 text-center py-10">Your cart is empty.</p>
  {% endif %}
</div>
{% endblock %}
